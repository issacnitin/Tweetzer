(this.webpackJsonptwitazi=this.webpackJsonptwitazi||[]).push([[0],{52:function(e,t,a){e.exports=a(67)},57:function(e,t,a){},58:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),i=a.n(s),c=(a(57),a(6)),o=a(8),l=a(10),u=a(9),h=a(11),m=(a(58),a(74)),d=a(73),p=a(72),f=a(69),v=a(36),g=a(43),b={authToken:"",tokenRefreshTimestamp:-1},E=a(51),w={following:[],followers:[]},y={page:0},O=[],C=Object(v.b)({Authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":case"SIGN_OUT":return t.authState;default:return e}},System:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAGE":return e.page=t.page,e;case"START_LOAD_PROFILE":var a=Object.assign({},e);return a.profile=t.profile,a;case"END_LOAD_PROFILE":var n=Object.assign({},e);return n.profile=t.profile,n;case"SET_MY_PROFILE_ID":var r=Object.assign({},e);return r.myusername=t.username,r;case"START_SEARCH_PROFILE":var s=Object.assign({},e);return s.searchProfiles=[],s;case"END_SEARCH_PROFILE":var i=Object.assign({},e);return i.searchProfiles=t.profiles,i;default:return e}},Tweet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TWEET_POST":case"TWEET_EDIT":case"TWEET_DELETE":return e;case"START_TWEET_REFRESH":case"START_TWEET_SEARCH":return[];case"END_TWEET_REFRESH":return Object.assign([],t.tweet);default:return e}},Social:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FOLLOW":var a=e.following;return a.push(t.following),Object.assign({},{followers:e.followers,following:a});case"END_FOLLOW":return Object.assign({},{followers:e.followers,following:[].concat(Object(E.a)(e.following),[t.following])});case"START_UNFOLLOW":return Object.assign({},{followers:e.followers,following:e.following});case"END_UNFOLLOW":var n=e.following;n.indexOf(t.follower);return n=n.filter((function(e){return e!=t.follower})),Object.assign({},{followers:e.followers,following:n});default:return e}}}),S=Object(v.c)(C,Object(v.a)(g.a)),k=a(5),T=a.n(k),j=function e(t){var a=this;Object(c.a)(this,e),this.baseURL="http://tweetzer.com",this.sendRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0;return fetch(a.baseURL+("/"!=e[0]?"/":"")+e,{method:t,mode:"cors",headers:{Accept:"application/json, text","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){throw console.error(e),e}))},this.sendRequestAuthorized=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,r=S.getState().Authentication.authToken;return fetch(a.baseURL+("/"!=e[0]?"/":"")+e,{method:t,mode:"cors",headers:{Accept:"application/json, text","Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){throw console.error(e),e}))},t&&(this.baseURL+=":"+t)},x=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"getProfile",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/profile/getprofile/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}},{key:"getMyProfile",value:function(){var e,t;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/profile/getme","GET"));case 2:return e=a.sent,a.next=5,T.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",{body:t,statusCode:e.status});case 7:case"end":return a.stop()}}),null,this)}},{key:"checkUsername",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/profile/checkusername/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}},{key:"searchUser",value:function(e,t){var a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/profile/search/"+e+"/"+t,"GET"));case 2:return a=r.sent,r.next=5,T.a.awrap(a.json());case 5:return n=r.sent,r.abrupt("return",{body:n,statusCode:a.status});case 7:case"end":return r.stop()}}),null,this)}}]),t}(j),P=function e(){Object(c.a)(this,e)};P.username="",P.searchstring="";var R,N=function(e){return{type:"CHANGE_PAGE",page:e}},I=function(e){return P.username=e,(new x).getProfile(e).then((function(t){var a={};a.name=t.body.name,a.username=t.body.username,P.username=e,S.dispatch(L(a))})).catch((function(e){S.getState().System.profile=void 0})),{type:"START_LOAD_PROFILE",profile:{}}},L=function(e){return{type:"END_LOAD_PROFILE",profile:e}},_=function(){return(new x).getMyProfile().then((function(e){e&&e.body&&(S.dispatch(A(e.body.username)),S.dispatch(I(e.body.username)))})).catch((function(e){})),{type:"SET_MY_PROFILE_ID",username:""}},A=function(e){return{type:"SET_MY_PROFILE_ID",username:e}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new x;return a.searchUser(e,t).then((function(e){var t=e.body,a=[],n=!0,r=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,l={};l.name=o.name,l.username=o.username,a.push(l)}}catch(u){r=!0,s=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}S.dispatch(U(a))})).catch((function(e){})),{type:"START_SEARCH_PROFILE"}},U=function(e){return{type:"END_SEARCH_PROFILE",profiles:e}};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LOGIN=1]="LOGIN",e[e.SIGNUP=2]="SIGNUP",e[e.PROFILE=3]="PROFILE",e[e.HOME=4]="HOME",e[e.SEARCH=5]="SEARCH"}(R||(R={}));var G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onLoginClick=function(){S.dispatch(N(R.LOGIN))},a.onRegisterClick=function(){S.dispatch(N(R.SIGNUP))},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement(m.a,{bg:"light",expand:"lg"},r.a.createElement(m.a.Brand,{href:"#home"},"Tweetzer"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(d.a.Link,{href:"#home"})),r.a.createElement(p.a,{inline:!0},r.a.createElement(f.a,{variant:"primary",onClick:this.onLoginClick,style:{margin:10}},"Login"),r.a.createElement(f.a,{variant:"secondary",onClick:this.onRegisterClick,style:{margin:10}},"Register")))))}}]),t}(r.a.Component),D=a(48),H=new(function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"signIn",value:function(e,t){var a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(this.sendRequest("/api/v1/profile/login","POST",{username:e,password:t}));case 2:return a=r.sent,r.next=5,T.a.awrap(a.json());case 5:return n=r.sent,r.abrupt("return",{body:n,statusCode:a.status});case 7:case"end":return r.stop()}}),null,this)}},{key:"signUp",value:function(e,t,a,n){var r,s;return T.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,T.a.awrap(this.sendRequest("/api/v1/profile/register","POST",{name:e,username:t,email:a,password:n}));case 2:return r=i.sent,i.next=5,T.a.awrap(r.json());case 5:return s=i.sent,i.abrupt("return",{body:s,statusCode:r.status});case 7:case"end":return i.stop()}}),null,this)}},{key:"refreshToken",value:function(){var e,t;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.awrap(this.sendRequest("/api/v1/profile/refreshtoken","GET"));case 2:return e=a.sent,a.next=5,T.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",{body:t,statusCode:e.status});case 7:case"end":return a.stop()}}),null,this)}}]),t}(j)),W=function(e,t){var a=S.getState().Authentication;return H.signIn(e,t).then((function(n){var r=n.body;a.authToken=r?r.Token:"",a.tokenRefreshTimestamp=(new Date).getTime(),localStorage.setItem("username",e),localStorage.setItem("password",t),S.dispatch(z(a)),S.dispatch(_())})).catch((function(e){S.dispatch(q(a))})),{type:"SIGN_IN",authState:a}},z=function(e){return S.dispatch(N(R.HOME)),{type:"SIGN_IN",authState:e}},q=function(e){return{type:"SIGN_IN",authState:e}},B=function(e){return localStorage.setItem("token",e.authToken),S.dispatch(N(R.HOME)),{type:"SIGN_UP",authState:e}},M=function(e,t){return{type:"SIGN_UP",authState:e}},V=function(){var e=S.getState().Authentication;return e.authToken="",e.tokenRefreshTimestamp=-1,localStorage.removeItem("username"),localStorage.removeItem("password"),S.dispatch(N(R.DEFAULT)),{type:"SIGN_OUT",authState:e}},J=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"search",value:function(e,t){var a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/tweet/search/"+e+"/"+t,"GET"));case 2:return a=r.sent,r.next=5,T.a.awrap(a.json());case 5:return n=r.sent,r.abrupt("return",{body:n,statusCode:a.status});case 7:case"end":return r.stop()}}),null,this)}},{key:"refresh",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/tweet/feed/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}},{key:"fetch",value:function(e,t){var a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/tweet/fetch/"+e+"/"+t,"GET"));case 2:return a=r.sent,r.next=5,T.a.awrap(a.json());case 5:return n=r.sent,r.abrupt("return",{body:n,statusCode:a.status});case 7:case"end":return r.stop()}}),null,this)}},{key:"postTweet",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/tweet/post","POST",{content:e}));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}}]),t}(j),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new J,n=[],r=a.refresh(t);return null!=e&&(r=a.fetch(e,t)),r.then((function(e){var t=e.body;n=[];var a=!0,r=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var o=i.value,l={};l.content=o.content,l.timestamp=o.timestamp,l.username=o.username,n.push(l)}}catch(u){r=!0,s=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw s}}S.dispatch($(n))})).catch((function(e){S.dispatch($(n))})),{type:"START_TWEET_REFRESH",tweet:n}},$=function(e){return{type:"END_TWEET_REFRESH",tweet:e}},K=function(e){return{type:"TWEET_POST",tweet:e}},Q=(a(65),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClickHome=function(){S.dispatch(Y()),S.dispatch(N(R.HOME))},a.onClickProfile=function(){P.username=S.getState().System.myusername,S.dispatch(N(R.PROFILE))},a.onSignoutClick=function(){S.dispatch(V())},a.onSearchButtonClick=function(){P.searchstring=a.state.searchtext,S.dispatch(N(R.SEARCH)),S.dispatch(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new J,n=[];return a.search(e,t).then((function(e){var t=e.body;n=[];var a=!0,r=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var o=i.value,l={};l.content=o.content,l.timestamp=o.timestamp,l.username=o.username,n.push(l)}}catch(u){r=!0,s=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw s}}S.dispatch($(n))})).catch((function(e){S.dispatch($(n))})),{type:"START_TWEET_SEARCH",tweet:n}}(a.state.searchtext)),S.dispatch(F(a.state.searchtext))},a.handleChange=function(e){a.setState({searchtext:e.target.value})},a.state={searchtext:""},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"header"},r.a.createElement(m.a,{bg:"light",expand:"lg"},r.a.createElement(m.a.Brand,{href:"#home"},"Tweetzer"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(d.a.Link,{onClick:this.onClickHome},"Home"),r.a.createElement(d.a.Link,{onClick:this.onClickProfile},"Profile")),r.a.createElement(p.a,{inline:!0},r.a.createElement(D.a,{type:"text",placeholder:"Search",className:"mr-sm-2",onChange:function(t){return e.handleChange(t)}}),r.a.createElement(f.a,{variant:"outline-success",style:{margin:10},onClick:this.onSearchButtonClick},"Search"),r.a.createElement(f.a,{variant:"secondary",style:{margin:10},onClick:this.onSignoutClick},"Sign Out")))))}}]),t}(r.a.Component)),X=a(71),Z=a(70),ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onLoginClick=function(){S.dispatch(W(a.state.username,a.state.password))},a.onCloseClick=function(){S.dispatch(V())},a.handleChange=function(e){switch(e.target.name){case"username":a.setState({username:e.target.value});break;case"password":a.setState({password:e.target.value})}},a.state={username:"",password:"",signInFailed:!1},S.subscribe((function(){var e=""==S.getState().Authentication.authToken;a.setState({signInFailed:e})})),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(X.a.Dialog,null,r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,"Login")),r.a.createElement(X.a.Body,null,r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"@")),r.a.createElement(D.a,{name:"username",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"Password")),r.a.createElement(D.a,{name:"password",type:"password",placeholder:"","aria-label":"","aria-describedby":"basic-addon1",onChange:function(t){return e.handleChange(t)}}))),this.state.signInFailed?r.a.createElement("div",{className:"alert alert-primary",role:"alert"},"Sign in failed!"):r.a.createElement("div",null),r.a.createElement(X.a.Footer,null,r.a.createElement(f.a,{variant:"primary",onClick:this.onLoginClick},"Login"),r.a.createElement(f.a,{variant:"secondary",onClick:this.onCloseClick},"Close"))))}}]),t}(r.a.Component),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onRegisterClick=function(){a.validateForm().then((function(e){e&&S.dispatch(function(e,t,a,n){var r=S.getState().Authentication;return H.signUp(e,t,a,n).then((function(e){var s=e.body;r.authToken=s?s.Token:"",r.tokenRefreshTimestamp=(new Date).getTime(),localStorage.setItem("username",t||a),localStorage.setItem("password",n),S.dispatch(B(r)),S.dispatch(_())})).catch((function(e){console.error(e),S.dispatch(M(r,e))})),{type:"SIGN_UP",authState:r}}(a.state.name,a.state.username,a.state.email,a.state.password))}))},a.onCloseClick=function(){S.dispatch(V())},a.handleChange=function(e){switch(e.target.name){case"username":a.setState({username:e.target.value}),a.validateUsername(e.target.value);break;case"email":a.setState({email:e.target.value});break;case"password":a.setState({password:e.target.value});break;case"confirmpassword":a.setState({confirmpassword:e.target.value});break;case"name":a.setState({name:e.target.value})}},a.validateUsername=function(e){0==e.length&&a.setState({validUsername:!1}),(new x).checkUsername(e).then((function(e){a.setState({validUsername:e.body.result})})).catch((function(e){a.setState({validUsername:!1})}))},a.state={name:"",username:"",email:"",password:"",confirmpassword:"",formValid:!0,validUsername:!0},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"validateForm",value:function(){var e=this;return new Promise((function(t){if(0==e.state.password.length||0==e.state.confirmpassword.length||0==e.state.username.length||0==e.state.email.length)return e.setState({formValid:!1}),void t(!1);if(e.state.password!=e.state.confirmpassword)return e.setState({formValid:!1}),void t(!1);var a=e.state.email.indexOf("@"),n=e.state.email.lastIndexOf(".");if(-1==a||-1==n||a>=n)return e.setState({formValid:!1}),void t(!1);e.setState({formValid:e.state.validUsername}),t(!0)}))}},{key:"render",value:function(){var e=r.a.createElement("div",null);return this.state.validUsername?this.state.formValid||(e=0==this.state.password.length||0==this.state.confirmpassword.length?r.a.createElement("div",{className:"alert alert-primary",role:"alert"},"Form invalid"):this.state.password!=this.state.confirmpassword?r.a.createElement("div",{className:"alert alert-primary",role:"alert"},"Passwords don't match"):r.a.createElement("div",{className:"alert alert-primary",role:"alert"},"Form invalid")):e=r.a.createElement("div",{className:"alert alert-primary",role:"alert"},"Empty username or username already exist"),r.a.createElement("div",null,r.a.createElement(X.a.Dialog,null,r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,"Register")),r.a.createElement(X.a.Body,null,r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"@")),r.a.createElement(D.a,{name:"username",placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",onChange:this.handleChange})),r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"Name")),r.a.createElement(D.a,{name:"name",placeholder:"First and Last Name","aria-label":"First and Last Name","aria-describedby":"basic-addon1",onChange:this.handleChange})),r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"Email")),r.a.createElement(D.a,{name:"email",placeholder:"darthvader@starwars.com","aria-label":"darthvader@starwars.com","aria-describedby":"basic-addon1",onChange:this.handleChange})),r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"Password")),r.a.createElement(D.a,{name:"password",type:"password",placeholder:"","aria-label":"","aria-describedby":"basic-addon1",onChange:this.handleChange})),r.a.createElement(Z.a,{className:"mb-3"},r.a.createElement(Z.a.Prepend,null,r.a.createElement(Z.a.Text,{id:"basic-addon1"},"Confirm Password")),r.a.createElement(D.a,{name:"confirmpassword",type:"password",placeholder:"","aria-label":"","aria-describedby":"basic-addon1",onChange:this.handleChange}))),e,r.a.createElement(X.a.Footer,null,r.a.createElement(f.a,{variant:"primary",onClick:this.onRegisterClick},"Register"),r.a.createElement(f.a,{variant:"secondary",onClick:this.onCloseClick},"Close"))))}}]),t}(r.a.Component),ae=(a(66),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClickUsername=function(e){P.username=e,S.dispatch(N(R.PROFILE))},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=new Date(1e3*this.props.timestamp);return r.a.createElement("div",{style:{borderRadius:10,background:"white",margin:10,padding:10}},r.a.createElement("div",{className:"rowC"},r.a.createElement("p",null,t.toDateString(),"\xa0\xa0"),r.a.createElement("a",{href:"#",onClick:function(t){return e.onClickUsername(e.props.username)}},"@",this.props.username)),this.props.content)}}]),t}(r.a.Component)),ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={tweets:S.getState().Tweet,page:0},S.subscribe((function(){var e=S.getState().Tweet;e.sort((function(e,t){return t.timestamp-e.timestamp})),a.setState({tweets:e})})),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},this.state.tweets.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(ae,{key:t,content:e.content,timestamp:e.timestamp,username:e.username}),r.a.createElement("br",null))})))}}]),t}(r.a.Component),re=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"follow",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/social/follow/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}},{key:"unfollow",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/social/unfollow/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}},{key:"getFollowers",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/social/getfollowers/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}},{key:"isFollowing",value:function(e){var t,a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(this.sendRequestAuthorized("/api/v1/social/amifollowing/"+e,"GET"));case 2:return t=n.sent,n.next=5,T.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",{body:a,statusCode:t.status});case 7:case"end":return n.stop()}}),null,this)}}]),t}(j),se=function(e){return{type:"END_FOLLOW",following:e}},ie=function(){return{type:"END_FOLLOW",following:""}},ce=function(e){return{type:"END_UNFOLLOW",follower:e}},oe=function(){return{type:"END_FOLLOW",following:""}},le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onFollowButtonClick=function(){var e;S.dispatch((e=a.props.username,(new re).follow(e).then((function(t){t.body&&S.dispatch(se(e))})).catch((function(e){console.error(e),S.dispatch(ie())})),{type:"START_FOLLOW",following:""})),a.setState({following:!0})},a.onUnfollowButtonClick=function(){var e;S.dispatch((e=a.props.username,(new re).unfollow(e).then((function(t){t.body&&S.dispatch(ce(e))})).catch((function(e){S.dispatch(oe())})),{type:"START_UNFOLLOW",follower:""})),a.setState({following:!1})},a.state={following:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.username!=this.props.username&&(new re).isFollowing(e.username).then((function(e){t.setState({following:"result"in e.body&&1==e.body.result})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.following?r.a.createElement(f.a,{onClick:this.onUnfollowButtonClick},"Unfollow"):r.a.createElement(f.a,{onClick:this.onFollowButtonClick},"Follow"))}}]),t}(r.a.Component),ue=a(12),he=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onNextPageClick=function(){a.setState({page:a.state.page+1},(function(){S.dispatch(Y(null,a.state.page))}))},a.onPrevPageClick=function(){a.setState({page:Math.max(0,a.state.page-1)},(function(){S.dispatch(Y(null,a.state.page))}))};var n=P.username;return a.state={name:"",username:"",mine:!1,page:0},n&&S.dispatch(I(n)),S.dispatch(Y(n)),S.subscribe((function(){var e=S.getState().System;e.profile&&a.setState({name:e.profile.name,username:e.profile.username,mine:e.profile.username==e.myusername})})),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,this.state.name),r.a.createElement("br",null),r.a.createElement("p",null,"@",this.state.username)),this.state.mine?r.a.createElement("div",null):r.a.createElement(le,{username:this.state.username}),r.a.createElement(ne,null),r.a.createElement("div",{style:{width:"100%",justifyContent:"center",alignContent:"center"}},r.a.createElement(ue.a,{style:{width:"30%",alignSelf:"center",justifyContent:"space-around"}},r.a.createElement(ue.a.Item,{onClick:this.onPrevPageClick},"Previous"),r.a.createElement(ue.a.Item,{active:!0},this.state.page+1),r.a.createElement(ue.a.Item,{onClick:this.onNextPageClick},"\xa0\xa0\xa0\xa0Next"))))}}]),t}(r.a.Component),me=a(49),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){switch(e.target.name){case"tweettext":a.setState({tweetText:e.target.value,characterCount:e.target.value.length})}},a.onPostTweetButtonClick=function(){S.dispatch(function(e,t){var a={};a.content=e,a.timestamp=t;var n=S.getState().Tweet,r=new J,s=S.getState().Tweet,i=S.getState().System.myusername;return i=i||"",r.postTweet(e).then((function(a){a&&n.unshift({content:e,timestamp:t,username:i}),S.dispatch(K(s))})).catch((function(e){S.dispatch(K(s))})),{type:"TWEET_POST",tweet:n}}(a.state.tweetText,(new Date).getTime()/1e3))},a.state={tweetText:"",characterCount:0},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return n.createElement("div",{style:{width:"100%",backgroundColor:"white",padding:10,margin:10,borderRadius:10}},n.createElement(p.a,null,n.createElement(p.a.Group,{controlId:"exampleForm.ControlTextarea1"},n.createElement(p.a.Label,null,"Post a tweet"),n.createElement(p.a.Control,{style:{resize:"none"},name:"tweettext",as:"textarea",rows:"3",onChange:function(t){return e.handleChange(t)}}))),n.createElement("div",{style:{flex:1,flexDirection:"row",alignItems:"flex-end"}},n.createElement(me.a,{style:{flex:1}},this.state.characterCount),n.createElement(f.a,{style:{flex:1},onClick:this.onPostTweetButtonClick,variant:"primary"},"Post Tweet")))}}]),t}(n.Component),pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onNextPageClick=function(){a.setState({page:a.state.page+1},(function(){S.dispatch(Y(null,a.state.page))}))},a.onPrevPageClick=function(){a.setState({page:Math.max(0,a.state.page-1)},(function(){S.dispatch(Y(null,a.state.page))}))},a.state={myusername:S.getState().System.myusername,page:0},S.dispatch(Y()),S.subscribe((function(){var e=S.getState().System.myusername;e!=a.state.myusername&&a.setState({myusername:e})})),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%"}},this.state.myusername,r.a.createElement(de,null),r.a.createElement(ne,null),r.a.createElement("div",{style:{width:"100%",justifyContent:"center",alignContent:"center"}},r.a.createElement(ue.a,{style:{width:"30%",alignSelf:"center",justifyContent:"space-around"}},r.a.createElement(ue.a.Item,{onClick:this.onPrevPageClick},"Previous"),r.a.createElement(ue.a.Item,{active:!0},this.state.page+1),r.a.createElement(ue.a.Item,{onClick:this.onNextPageClick},"\xa0\xa0\xa0\xa0Next"))))}}]),t}(r.a.Component),fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onProfileClick=function(){P.username=a.props.username,S.dispatch(N(R.PROFILE))},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.createElement("div",{style:{backgroundColor:"lightblue",margin:10,padding:10,borderRadius:10}},this.props.name,this.props.name.length>0?n.createElement("br",null):n.createElement("div",null),n.createElement("a",{href:"#",onClick:this.onProfileClick},"@",this.props.username))}}]),t}(n.Component),ve=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onNextPageClick=function(){a.setState({page:a.state.page+1},(function(){S.dispatch(F(a.state.searchstring,a.state.page)),S.dispatch(Y(null,a.state.page))}))},a.onPrevPageClick=function(){a.setState({page:Math.max(0,a.state.page-1)},(function(){S.dispatch(F(a.state.searchstring,a.state.page)),S.dispatch(Y(null,a.state.page))}))};var n=S.getState().System.searchProfiles;return a.state={searchstring:P.searchstring?P.searchstring:"",profiles:n,page:0},S.subscribe((function(){var e=S.getState().System.searchProfiles;a.setState({profiles:e})})),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e;return r.a.createElement("div",{style:{width:"100%"}},null===(e=this.state.profiles)||void 0===e?void 0:e.map((function(e){return r.a.createElement("div",null,r.a.createElement(fe,{name:e.name,username:e.username}),r.a.createElement("br",null))})),r.a.createElement(ne,null),r.a.createElement(ue.a,{style:{width:"100%",alignSelf:"center"}},r.a.createElement(ue.a.Prev,{onClick:this.onPrevPageClick}),r.a.createElement(ue.a.Item,{active:!0},this.state.page+1),r.a.createElement(ue.a.Next,{onClick:this.onNextPageClick})))}}]),t}(r.a.Component),ge=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=localStorage.getItem("username"),r=localStorage.getItem("password");return null!=n&&null!=r&&S.dispatch(W(n,r)),a.state={page:R.DEFAULT,loggedIn:!1,profile:void 0},S.subscribe((function(){var e=S.getState();e.System.page!=a.state.page&&a.setState({page:e.System.page,loggedIn:!!e.Authentication.authToken&&""!=e.Authentication.authToken}),null==a.state.profile&&a.setState({profile:e.System.profile})})),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null);switch(this.state.page){case R.LOGIN:e=r.a.createElement(ee,null);break;case R.SIGNUP:e=r.a.createElement(te,null);break;case R.HOME:e=r.a.createElement(pe,null);break;case R.PROFILE:e=r.a.createElement(he,null);break;case R.SEARCH:e=r.a.createElement(ve,null);break;default:e=r.a.createElement("div",null)}return r.a.createElement("div",{className:"App"},this.state.loggedIn?r.a.createElement(Q,null):r.a.createElement(G,null),e)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.7a7673b2.chunk.js.map